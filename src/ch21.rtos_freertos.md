# 单片机总结系列(21) FreeRTOS的移植和应用

FreeRTOS是完全开源的嵌入式实时系统，具有内存占用小、执行时间短、支持多任务、支持多种调度算法等特点。其移植和应用也比较简单，只需要根据不同的平台进行简单的配置即可。FreeRTOS基于MIT开源协议，对于个人和商业使用都十分友好。FreeRTOS的另一个重要特点是其附加功能的独立性比较好，单独移植和使用FreeRTOS十分简单，如果有其它需求，也很容易适配各类网络协议，因此广泛用于工业制造、医学设备、影像设备中。

上述都是RTOS的主要优点，不过在单片机开发中，为什么要使用RTOS？事实上，在这篇之前的文章中，都是使用裸机开发来实现功能的。RTOS的实时可控在某些场景下是必要需求，但还有很多场景并未要求如此严格的实时性，如果资源允许，仍然建议使用RTOS；使用RTOS可以降低代码开发难度，对于有通讯时序要求的项目，使用裸机开发就需要维护状态机来管理通讯流程，并要保证主循环一次的时间不会发生超时；而使用RTOS通过单独任务管理，很容易就能够独立单独的任务管理通讯，降低了系统中各模块的耦合以及系统复杂度，更方便开发管理。

如果想要学习和使用FreeRTOS，那么最权威的一定是官方手册。

其官方文档地址：https://www.freertos.org/zh-cn-cmn-s/Documentation/00-Overview；

在这里可以了解到如何下载，创建工程并使用，不过这里我还是从应用经验角度，分享些使用心得。对于FreeRTOS的应用实践，主要包含以下几个方面内容。

1. FreeRTOS的下载、平台移植。
2. 关键配置项参数功能说明理解和设置。
3. 任务创建和系统启动。
4. 常用线程同步方法和功能调试。

理解了这些知识，后面就可以进一步在此基础上扩展应用功能；本节的目录如下所示。

## freertos_transplant

对于FreeRTOS的移植，比较早的版本就是去官网下载开源代码；根据平台添加工程，将开源代码添加到工程中，在修改系统支持即可。不过对于目前的主流芯片，目前都支持直接生成带FreeRTOS的工程。这里以STM32为例，演示直接通过STM32CubeMX生成，以及手动创建移植两种方式实现FreeRTOS的应用。



## next_chapter

[返回目录](./../README.md)

直接开始下一小节: [算法应用模块](./ch22.rtos_rtthread.md)
